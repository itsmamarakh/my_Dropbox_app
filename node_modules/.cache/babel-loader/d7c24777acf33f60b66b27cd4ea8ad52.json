{"ast":null,"code":"var _jsxFileName = \"/Users/student/Desktop/My_dropbox-master/src/pages/Dashboard.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport StorageNavBar from '../components/storage/StorageNavBar';\nimport { useFolder } from './../components/hooks/useFolder';\nimport Folder from './../components/storage/Folder';\nimport File from './../components/storage/File';\nimport { useParams } from \"react-router-dom\";\nimport FolderBreadcumps from './../components/storage/FolderBreadcumps';\nimport { getStorage, ref, deleteObject } from \"firebase/storage\";\nimport { useAuth } from '../components/store/AuthStore';\nimport { doc, deleteDoc } from \"firebase/firestore\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Dashboard = () => {\n  _s();\n\n  const {\n    id\n  } = useParams();\n  const {\n    folder,\n    childFolders,\n    childFiles\n  } = useFolder(id);\n  const {\n    currentUser\n  } = useAuth();\n\n  const deleteFolder = async name => {\n    const storage = getStorage();\n    const currentPath = folder.path.map(u => u.name).join('/');\n    const desertRef = ref(storage, currentPath ? `files/${currentUser.uid}/${currentPath}/${name}` : `files/${currentUser.uid}/${name}`);\n    deleteObject(desertRef).then(() => {\n      alert(\"Delete\");\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"\",\n      children: /*#__PURE__*/_jsxDEV(FolderBreadcumps, {\n        currentFolder: folder\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"\",\n      children: /*#__PURE__*/_jsxDEV(StorageNavBar, {\n        currentFolder: folder\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-6 bg-slate-100 drop-shadow-2xl rounded-t-lg p-2\",\n      style: {\n        maxHeight: window.innerHeight - 300,\n        height: window.innerHeight - 300\n      },\n      children: [childFolders.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"b\",\n        children: childFolders.map(childFolder => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border-b p-1 hover:bg-neutral-50 flex justify-between py-4\",\n          children: /*#__PURE__*/_jsxDEV(Folder, {\n            folder: childFolder\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 37\n          }, this)\n        }, childFolder.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 33\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 21\n      }, this), childFiles.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: childFiles.map(file => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border-b p-1 hover:bg-neutral-50 flex justify-between py-3\",\n          children: /*#__PURE__*/_jsxDEV(File, {\n            file: file\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 37\n          }, this)\n        }, file.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 33\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Dashboard, \"V0Uleq0a61Awf+sQpv4wvHr7oyI=\", false, function () {\n  return [useParams, useFolder, useAuth];\n});\n\n_c = Dashboard;\nexport default Dashboard;\n\nvar _c;\n\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","StorageNavBar","useFolder","Folder","File","useParams","FolderBreadcumps","getStorage","ref","deleteObject","useAuth","doc","deleteDoc","Dashboard","id","folder","childFolders","childFiles","currentUser","deleteFolder","name","storage","currentPath","path","map","u","join","desertRef","uid","then","alert","catch","error","console","log","maxHeight","window","innerHeight","height","length","childFolder","file"],"sources":["/Users/student/Desktop/My_dropbox-master/src/pages/Dashboard.js"],"sourcesContent":["import React from 'react';\nimport StorageNavBar from '../components/storage/StorageNavBar';\nimport { useFolder } from './../components/hooks/useFolder';\nimport Folder from './../components/storage/Folder';\nimport File from './../components/storage/File';\nimport { useParams } from \"react-router-dom\";\nimport FolderBreadcumps from './../components/storage/FolderBreadcumps';\nimport { getStorage, ref, deleteObject } from \"firebase/storage\";\nimport { useAuth } from '../components/store/AuthStore';\nimport { doc, deleteDoc } from \"firebase/firestore\";\n\nconst Dashboard = () => {\n    const { id } = useParams();\n    const { folder, childFolders, childFiles } = useFolder(id);\n    const { currentUser } = useAuth();\n\n    const deleteFolder = async (name) => {\n        const storage = getStorage();\n        const currentPath = folder.path.map(u => u.name).join('/');\n        const desertRef = ref(storage, currentPath ?\n                            `files/${currentUser.uid}/${currentPath}/${name}` :\n                            `files/${currentUser.uid}/${name}`);\n\n\n\n        deleteObject(desertRef).then(() => {\n            alert(\"Delete\");\n          }).catch((error) => {\n            console.log(error)\n          });\n    }\n\n    return (\n        <div className=\"container mx-auto\">\n            <div className=\"\">\n                <FolderBreadcumps currentFolder={folder}/>\n            </div>\n            <div className=\"\">\n                <StorageNavBar currentFolder={folder}/>\n            </div>\n            <div className=\"mt-6 bg-slate-100 drop-shadow-2xl rounded-t-lg p-2\"\n                style={{ maxHeight: window.innerHeight - 300, height: window.innerHeight - 300 }}\n            >\n                { childFolders.length > 0 && (\n                    <div className=\"b\">\n                        {\n                            childFolders.map(childFolder => (\n                                <div\n                                    className=\"border-b p-1 hover:bg-neutral-50 flex justify-between py-4\"\n                                    key={childFolder.id}>\n                                    <Folder folder={childFolder}/>\n                                    {/* <div onClick={() => deleteFolder(childFolder.name)}>\n                                        Delete\n                                    </div> */}\n                                </div>\n                            ))\n                        }\n                    </div>\n                ) }\n\n                {/*{ childFolders.length > 0 && childFiles.length > 0 && <hr/> }*/}\n                { childFiles.length > 0 && (\n                    <div>\n                        {\n                            childFiles.map(file => (\n                                <div className=\"border-b p-1 hover:bg-neutral-50 flex justify-between py-3\" key={file.id}>\n                                    <File file={file}/>\n                                    {/* <div onClick={() => deleteFolder(file.name)}>\n                                        Delete\n                                    </div> */}\n                                </div>\n                            ))\n                        }\n                    </div>\n                ) }\n            </div>\n        </div>\n    );\n};\n\nexport default Dashboard;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}