{"ast":null,"code":"import _regeneratorRuntime from\"/Users/student/Desktop/My_dropbox-master/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/student/Desktop/My_dropbox-master/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from'react';import StorageNavBar from'../components/storage/StorageNavBar';import{useFolder}from'./../components/hooks/useFolder';import Folder from'./../components/storage/Folder';import File from'./../components/storage/File';import{useParams}from\"react-router-dom\";import FolderBreadcumps from'./../components/storage/FolderBreadcumps';import{getStorage,ref,deleteObject}from\"firebase/storage\";import{useAuth}from'../components/store/AuthStore';import{doc,deleteDoc}from\"firebase/firestore\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Dashboard=function Dashboard(){var _useParams=useParams(),id=_useParams.id;var _useFolder=useFolder(id),folder=_useFolder.folder,childFolders=_useFolder.childFolders,childFiles=_useFolder.childFiles;var _useAuth=useAuth(),currentUser=_useAuth.currentUser;var deleteFolder=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(name){var storage,currentPath,desertRef;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:storage=getStorage();currentPath=folder.path.map(function(u){return u.name;}).join('/');desertRef=ref(storage,currentPath?\"files/\".concat(currentUser.uid,\"/\").concat(currentPath,\"/\").concat(name):\"files/\".concat(currentUser.uid,\"/\").concat(name));deleteObject(desertRef).then(function(){alert(\"Delete\");}).catch(function(error){console.log(error);});case 4:case\"end\":return _context.stop();}}},_callee);}));return function deleteFolder(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"\",children:/*#__PURE__*/_jsx(FolderBreadcumps,{currentFolder:folder})}),/*#__PURE__*/_jsx(\"div\",{className:\"\",children:/*#__PURE__*/_jsx(StorageNavBar,{currentFolder:folder})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 bg-slate-100 drop-shadow-2xl rounded-t-lg p-2\",style:{maxHeight:window.innerHeight-300,height:window.innerHeight-300},children:[childFolders.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"b\",children:childFolders.map(function(childFolder){return/*#__PURE__*/_jsx(\"div\",{className:\"border-b p-1 hover:bg-neutral-50 flex justify-between py-4\",children:/*#__PURE__*/_jsx(Folder,{folder:childFolder})},childFolder.id);})}),childFiles.length>0&&/*#__PURE__*/_jsx(\"div\",{children:childFiles.map(function(file){return/*#__PURE__*/_jsx(\"div\",{className:\"border-b p-1 hover:bg-neutral-50 flex justify-between py-3\",children:/*#__PURE__*/_jsx(File,{file:file})},file.id);})})]})]});};export default Dashboard;","map":{"version":3,"names":["React","StorageNavBar","useFolder","Folder","File","useParams","FolderBreadcumps","getStorage","ref","deleteObject","useAuth","doc","deleteDoc","Dashboard","id","folder","childFolders","childFiles","currentUser","deleteFolder","name","storage","currentPath","path","map","u","join","desertRef","uid","then","alert","catch","error","console","log","maxHeight","window","innerHeight","height","length","childFolder","file"],"sources":["/Users/student/Desktop/My_dropbox-master/src/pages/Dashboard.js"],"sourcesContent":["import React from 'react';\nimport StorageNavBar from '../components/storage/StorageNavBar';\nimport { useFolder } from './../components/hooks/useFolder';\nimport Folder from './../components/storage/Folder';\nimport File from './../components/storage/File';\nimport { useParams } from \"react-router-dom\";\nimport FolderBreadcumps from './../components/storage/FolderBreadcumps';\nimport { getStorage, ref, deleteObject } from \"firebase/storage\";\nimport { useAuth } from '../components/store/AuthStore';\nimport { doc, deleteDoc } from \"firebase/firestore\";\n\nconst Dashboard = () => {\n    const { id } = useParams();\n    const { folder, childFolders, childFiles } = useFolder(id);\n    const { currentUser } = useAuth();\n\n    const deleteFolder = async (name) => {\n        const storage = getStorage();\n        const currentPath = folder.path.map(u => u.name).join('/');\n        const desertRef = ref(storage, currentPath ?\n                            `files/${currentUser.uid}/${currentPath}/${name}` :\n                            `files/${currentUser.uid}/${name}`);\n\n\n\n        deleteObject(desertRef).then(() => {\n            alert(\"Delete\");\n          }).catch((error) => {\n            console.log(error)\n          });\n    }\n\n    return (\n        <div className=\"container mx-auto\">\n            <div className=\"\">\n                <FolderBreadcumps currentFolder={folder}/>\n            </div>\n            <div className=\"\">\n                <StorageNavBar currentFolder={folder}/>\n            </div>\n            <div className=\"mt-6 bg-slate-100 drop-shadow-2xl rounded-t-lg p-2\"\n                style={{ maxHeight: window.innerHeight - 300, height: window.innerHeight - 300 }}\n            >\n                { childFolders.length > 0 && (\n                    <div className=\"b\">\n                        {\n                            childFolders.map(childFolder => (\n                                <div\n                                    className=\"border-b p-1 hover:bg-neutral-50 flex justify-between py-4\"\n                                    key={childFolder.id}>\n                                    <Folder folder={childFolder}/>\n                                    {/* <div onClick={() => deleteFolder(childFolder.name)}>\n                                        Delete\n                                    </div> */}\n                                </div>\n                            ))\n                        }\n                    </div>\n                ) }\n\n                {/*{ childFolders.length > 0 && childFiles.length > 0 && <hr/> }*/}\n                { childFiles.length > 0 && (\n                    <div>\n                        {\n                            childFiles.map(file => (\n                                <div className=\"border-b p-1 hover:bg-neutral-50 flex justify-between py-3\" key={file.id}>\n                                    <File file={file}/>\n                                    {/* <div onClick={() => deleteFolder(file.name)}>\n                                        Delete\n                                    </div> */}\n                                </div>\n                            ))\n                        }\n                    </div>\n                ) }\n            </div>\n        </div>\n    );\n};\n\nexport default Dashboard;\n"],"mappings":"4QAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,MAAOC,cAAP,KAA0B,qCAA1B,CACA,OAASC,SAAT,KAA0B,iCAA1B,CACA,MAAOC,OAAP,KAAmB,gCAAnB,CACA,MAAOC,KAAP,KAAiB,8BAAjB,CACA,OAASC,SAAT,KAA0B,kBAA1B,CACA,MAAOC,iBAAP,KAA6B,0CAA7B,CACA,OAASC,UAAT,CAAqBC,GAArB,CAA0BC,YAA1B,KAA8C,kBAA9C,CACA,OAASC,OAAT,KAAwB,+BAAxB,CACA,OAASC,GAAT,CAAcC,SAAd,KAA+B,oBAA/B,C,wFAEA,GAAMC,UAAS,CAAG,QAAZA,UAAY,EAAM,CACpB,eAAeR,SAAS,EAAxB,CAAQS,EAAR,YAAQA,EAAR,CACA,eAA6CZ,SAAS,CAACY,EAAD,CAAtD,CAAQC,MAAR,YAAQA,MAAR,CAAgBC,YAAhB,YAAgBA,YAAhB,CAA8BC,UAA9B,YAA8BA,UAA9B,CACA,aAAwBP,OAAO,EAA/B,CAAQQ,WAAR,UAAQA,WAAR,CAEA,GAAMC,aAAY,4FAAG,iBAAOC,IAAP,sJACXC,OADW,CACDd,UAAU,EADT,CAEXe,WAFW,CAEGP,MAAM,CAACQ,IAAP,CAAYC,GAAZ,CAAgB,SAAAC,CAAC,QAAIA,EAAC,CAACL,IAAN,EAAjB,EAA6BM,IAA7B,CAAkC,GAAlC,CAFH,CAGXC,SAHW,CAGCnB,GAAG,CAACa,OAAD,CAAUC,WAAW,iBACbJ,WAAW,CAACU,GADC,aACMN,WADN,aACqBF,IADrB,kBAEbF,WAAW,CAACU,GAFC,aAEMR,IAFN,CAArB,CAHJ,CASjBX,YAAY,CAACkB,SAAD,CAAZ,CAAwBE,IAAxB,CAA6B,UAAM,CAC/BC,KAAK,CAAC,QAAD,CAAL,CACD,CAFH,EAEKC,KAFL,CAEW,SAACC,KAAD,CAAW,CAClBC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACD,CAJH,EATiB,sDAAH,kBAAZb,aAAY,4CAAlB,CAgBA,mBACI,aAAK,SAAS,CAAC,mBAAf,wBACI,YAAK,SAAS,CAAC,EAAf,uBACI,KAAC,gBAAD,EAAkB,aAAa,CAAEJ,MAAjC,EADJ,EADJ,cAII,YAAK,SAAS,CAAC,EAAf,uBACI,KAAC,aAAD,EAAe,aAAa,CAAEA,MAA9B,EADJ,EAJJ,cAOI,aAAK,SAAS,CAAC,oDAAf,CACI,KAAK,CAAE,CAAEoB,SAAS,CAAEC,MAAM,CAACC,WAAP,CAAqB,GAAlC,CAAuCC,MAAM,CAAEF,MAAM,CAACC,WAAP,CAAqB,GAApE,CADX,WAGMrB,YAAY,CAACuB,MAAb,CAAsB,CAAtB,eACE,YAAK,SAAS,CAAC,GAAf,UAEQvB,YAAY,CAACQ,GAAb,CAAiB,SAAAgB,WAAW,qBACxB,YACI,SAAS,CAAC,4DADd,uBAGI,KAAC,MAAD,EAAQ,MAAM,CAAEA,WAAhB,EAHJ,EAESA,WAAW,CAAC1B,EAFrB,CADwB,EAA5B,CAFR,EAJR,CAqBMG,UAAU,CAACsB,MAAX,CAAoB,CAApB,eACE,qBAEQtB,UAAU,CAACO,GAAX,CAAe,SAAAiB,IAAI,qBACf,YAAK,SAAS,CAAC,4DAAf,uBACI,KAAC,IAAD,EAAM,IAAI,CAAEA,IAAZ,EADJ,EAAiFA,IAAI,CAAC3B,EAAtF,CADe,EAAnB,CAFR,EAtBR,GAPJ,GADJ,CA8CH,CAnED,CAqEA,cAAeD,UAAf"},"metadata":{},"sourceType":"module"}